<!DOCTYPE html>

<head>

  <meta charset="utf-8">

  <title>Line chart</title>

  <script src="../node_modules/d3/build/d3.min.js"></script>

  <style type="text/css">
    svg {
      overflow: visible;
    }
  </style>
</head>

<body>

  <h2>Einkommensentwicklung</h2>

  <div id="chart"></div>

  <p>Quelle: frei erfunden</p>

  <script type="text/javascript">

    d3.json('data-timeline.json', draw);

    function draw(data) {

      var parseTime = d3.timeParse('%Y');

      data = data.map(function (d) {
        return {
          year: parseTime(d.year),
          income: parseInt(d.income)
        };
      });

      var width = 400;
      var height = 200;

      var margin = { top: 10, right: 10, bottom: 20, left: 45 };

      var xDomain = d3.extent(data, function (d) { return d.year; } );
      var yDomain = d3.extent(data, function (d) { return d.income; } );

      var xScale = d3.scaleTime()
        .domain(xDomain)
        .range([0, width]);
      var yScale = d3.scaleLinear()
        .domain([0, yDomain[1]])
        .range([height, 0]);

      var line = d3.line()
        .x(function (d) { return xScale(d.year); })
        .y(function (d) { return yScale(d.income); });
        //.curve(d3.curveNatural)

      var xAxis = d3.axisBottom(xScale)
        .ticks(5);
      var yAxis = d3.axisLeft(yScale)
        .ticks(5);

      var svg = d3.select('#chart')
        .append('svg')
          .attr('width', width + margin.left + margin.right)
          .attr('height', height + margin.top + margin.bottom);

      var group = svg.append('g')
        .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

      group.append('g')
        .attr('transform', 'translate(0,' + height + ')')
        .call(xAxis);

      group.append('g')
        .call(yAxis);

      group.append('path')
        .datum(data)
        .attr('fill', 'none')
        .attr('stroke', 'dodgerblue')
        .attr('stroke-width', 1.5)
        .attr('d', line);
    }
  </script>
</body>

